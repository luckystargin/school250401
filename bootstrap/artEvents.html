<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Art Events</title>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/my.css">
  <link rel="stylesheet" href="css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <link rel="stylesheet" href="css/MarkerCluster.css">
  <style>
    .carousel-item.bg-cover {
      position: relative;
      height: 80vh;
      background-size: cover;
      background-position: center;
    }

    .carousel-item.bg-cover::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.15);
      /* 半透明白色 */
    }
  </style>

</head>

<body>
  <!-- s01navbar -->
  <section id="s01" class="bg-light">
    <div class="container">
      <nav class="navbar navbar-expand-lg bg-light navbar-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">
            <img src="images/gramophone.gif" style="height: 5vh; width: auto;">
          </a>
          <!-- 漢堡條 -->
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">首頁</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                  aria-expanded="false">
                  最新活動
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="#">音樂劇</a></li>
                  <li><a class="dropdown-item" href="#">展覽</a></li>
                  <li><a class="dropdown-item" href="#">演唱會</a></li>
                  <!-- <li>
                                  <hr class="dropdown-divider">
                              </li>
                              <li><a class="dropdown-item" href="#">Something else here</a></li> -->
                </ul>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">購買票券</a>
              </li>
              <li class="nav-item" id="s01_control_panel_btn">
                <a class="btn btn-secondary" href="artEvents-member-controlPanel_v1.html"
                  target="_blank">控制台</a>
              </li>
            </ul>
            <div>

              <!-- 可以試著放大頭照 -->
              <span class="h4 tx-007 fw-900 me-3 d-none" id="s01_username_showtext">歡迎會員: <span class="h3 tx-008"
                  id="s01_username_text">XXX</span></span>

              <!--bootstrap Live demo -->
              <!-- <a class="btn btn-success" href="artEvents250218-member-control-panel_v1.html">控制台</a> -->
              <button class="btn btn-warning " data-bs-toggle="modal" data-bs-target="#registerModal" id="s01_reg_btn">
                註冊</button>
              <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#loginModal"
                id="s01_login_btn">登入</button>


              <button class="btn btn-danger d-none" id="s01_logout_btn">登出</button>


            </div>
          </div>
        </div>
      </nav>
    </div>
  </section>

  <!-- s02輪播 -->
  <section id="s02">
    <!-- <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="false"> -->
    <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">

      <div class="carousel-indicators ">
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="0" class="active"
          aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="2" aria-label="Slide 3"></button>
        <button type="button" data-bs-target="#carouselExampleFade" data-bs-slide-to="3" aria-label="Slide 4"></button>

      </div>

      <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel"></div>
      <div class="carousel-inner" style="height: 80vh; width: auto; ">
        <!-- bg-cover + vh-100 -->
        <!-- active保留第一個段落，其他段落拿掉-->
        <div class="carousel-item bg-cover active"
          style="height: 80vh; background-image: url(images/ni03.jpeg);background-attachment: fixed; ">
          <div class="carousel-caption d-none d-md-block p-3 rounded-4 shadow-lg"
            style=" max-width: 200px; margin: 0 auto;"></div>
        </div>
        <div class="carousel-item bg-cover"
          style="height: 80vh; background-image: url(images/hp02.jpg);background-attachment: fixed;">
          <div class="carousel-caption d-none d-md-block p-3 rounded-4 shadow-lg"
            style=" max-width: 200px; margin: 0 auto;"></div>
        </div>
        <div class="carousel-item bg-cover"
          style="height: 80vh; background-image: url(images/di03.jpg);background-attachment: fixed;">
          <div class="carousel-caption d-none d-md-block p-3 rounded-4 shadow-lg"
            style="max-width: 200px; margin: 0 auto;"></div>
        </div>
        <div class="carousel-item bg-cover"
          style="height: 100vh; background-image: url(images/la02.jpg);background-attachment: fixed;">
          <div class="carousel-caption d-none d-md-block p-3 rounded-4 shadow-lg"
            style="max-width: 200px; margin: 0 auto;"></div>
        </div>

      </div>
      <button class="carousel-control-prev tx-006" type="button" data-bs-target="#carouselExampleFade"
        data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">上一頁</span>
      </button>
      <button class="carousel-control-next tx-006" type="button" data-bs-target="#carouselExampleFade"
        data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">下一頁</span>
      </button>
    </div>
    </div>
    </div>
  </section>

  <section id="s03">
    <div class="container mt-3 container-fluid">
      <div class="display-4 fw-900 text-center my-3 tx-004">查詢藝文活動</div>
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-6">
            <select name="mycity" id="mycity" class="form-select form-select-lg mt-4">
              <option value="" selected disabled>---選擇縣市名稱---</option>
              <option value="台中市">台中市</option>
              <option value="高雄市">高雄市</option>
              <option value="澎湖">澎湖</option>

            </select>
            <select name="myarea" id="myarea" class="form-select form-select-lg mt-3">
              <option value="" selected disabled>---選擇鄉鎮區名稱---</option>
              <option value="西屯區">西屯區</option>
              <option value="北屯區">北屯區</option>
              <option value="南屯區">南屯區</option>
            </select>
          </div>
        </div>

        <div class="row" id="mydata">
          <div class="col-md-4 mt-3">
            <div class="card shadow">
              <img src="images/exh02.png" class="card-img-top img-fluid rounded-2 " alt="">
              <div class="card-body text-center">
                <div class="h1 fw-900 text-danger">展覽:xxx</div>
                <div class="h2 fw-900">地點:xxx</div>
                <div class="h3 fw-900">地址:xxx</div>
                <br>
                <small class="badge bg-003 wow animate__heartBeat" data-wow-duration="1s" data-wow-delay="0s"
                  data-wow-iteration="infinite">限時優惠</small>(倒數時間)
                <br><br>
                <button class="btn btn-outline-info btn-sm">查看更多</button>


              </div>
            </div>
          </div>

          <div class="col-md-4 mt-3">
            <div class="card shadow">
              <img src="images/exh02.png" class="card-img-top img-fluid rounded-2 " alt="">
              <div class="card-body text-center">
                <div class="h1 fw-900 text-danger">展覽:xxx</div>
                <div class="h2 fw-900">地點:xxx</div>
                <div class="h3 fw-900">地址:xxx</div>
                <br>
                <small class="badge bg-003 wow animate__heartBeat" data-wow-duration="1s" data-wow-delay="0s"
                  data-wow-iteration="infinite">限時優惠</small>(倒數時間)
                <br><br>
                <button class="btn btn-outline-info btn-sm">查看更多</button>


              </div>
            </div>
          </div>

          <div class="col-md-4 mt-3">
            <div class="card shadow">
              <img src="images/exh02.png" class="card-img-top img-fluid rounded-2 " alt="">
              <div class="card-body text-center">
                <div class="h1 fw-900 text-danger">展覽:xxx</div>
                <div class="h3 fw-900">地點:xxx</div>
                <div class="h3 fw-900">地址:xxx</div>
                <br>
                <small class="badge bg-003 wow animate__heartBeat" data-wow-duration="1s" data-wow-delay="0s"
                  data-wow-iteration="infinite">限時優惠</small> (倒數時間)
                <br><br>
                <button class="btn btn-outline-info btn-sm">查看更多</button>


              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </section>



  <!-- registerModal -->
  <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <!-- modal-xl 長的輸入框 -->
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <!-- 同按鈕顏色 -->
        <div class="modal-header text-bg-warning">
          <h1 class="modal-title fs-4 fw-900" id="exampleModalLabel">會員註冊</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row">

            <div class="mb-3">
              <label for="" class="form-label">帳號</label>
              <input type="text" class="form-control is-invalid" id="username_reg" name="username_reg"
                placeholder="3-6字數">
              <div class="valid-feedback" id="regModal_username_valid_feedback">符合規則</div>
              <div class="invalid-feedback" id="regModal_username_invalid_feedback">不符合規則</div>
            </div>
            <div class="mb-3">
              <label for="" class="form-label">密碼</label>
              <input type="password" class="form-control is-invalid" id="password_reg" name="password_reg"
                placeholder="3-6字數">
              <div class="valid-feedback">符合規則</div>
              <div class="invalid-feedback">不符合規則</div>
            </div>
            <div class="mb-3">
              <label for="" class="form-label">確認密碼</label>
              <input type="password" class="form-control is-invalid" id="re_password_reg" name="re_password_reg">
              <div class="valid-feedback">符合規則</div>
              <div class="invalid-feedback">不符合規則</div>
            </div>

            <div class="mb-3 input-group">
              <label for="" class="form-label">Email</label>
              <div class="input-group">
                <input type="text" class="form-control is-invalid" placeholder="3-10字數" id="email_reg" name="email_reg">
                <!-- <span class="input-group-text">@gmail.com</span> -->
                <div class="valid-feedback">符合規則</div>
                <div class="invalid-feedback">不符合規則</div>

              </div>

            </div>
            <div class="mb-3">
              <label for="" class="form-label">性別</label>
              <div class="d-block">
                <div class="form-check form-check-inline">
                  <input type="checkbox" class="form-check-input is-invalid">
                  <label for="" class="form-check-label">male</label>
                </div>

                <div class="form-check form-check-inline">
                  <input type="checkbox" class="form-check-input is-invalid">
                  <label for="" class="form-check-label">female</label>
                </div>
              </div>

              <div class="valid-feedback">符合規則</div>
              <div class="invalid-feedback">不符合規則</div>
            </div>



            <div class="mb-3">
              <label for="" class="form-label">年齡</label>
              <div class="d-block">
                <div class="form-check form-check-inline">
                  <input type="checkbox" class="form-check-input is-invalid">
                  <label for="" class="form-check-label">18以下</label>
                </div>
                <div class="form-check form-check-inline">
                  <input type="checkbox" class="form-check-input is-invalid">
                  <label for="" class="form-check-label">18-28</label>
                </div>
                <div class="form-check form-check-inline">
                  <input type="checkbox" class="form-check-input is-invalid">
                  <label for="" class="form-check-label">29-40</label>
                </div>
                <div class="form-check form-check-inline">
                  <input type="checkbox" class="form-check-input is-invalid">
                  <label for="" class="form-check-label">41-64</label>
                </div>

                <div class="form-check form-check-inline">
                  <input type="checkbox" class="form-check-input is-invalid">
                  <label for="" class="form-check-label">65以上</label>
                </div>
              </div>

              <div class="valid-feedback">符合規則</div>
              <div class="invalid-feedback">不符合規則</div>
            </div>

            <div class="mb-3">
              <label for="" class="select-label">居住地</label>
              <select name="selectCity" id="selectCity" class="form-select mt-2">
                <option value="" class="text-center" selected disabled>---選擇居住地---</option>
                <option value="">台中市</option>
              </select>
              <div class="valid-feedback">符合規則</div>
              <div class="invalid-feedback">不符合規則</div>
            </div>
            <div class="mb-3">
              <label for="" class="form-label">年收入</label>
              <div class="form-check">
                <input type="checkbox" class="form-check-input is-invalid">
                <label for="" class="form-check-label">年收39萬以下</label>
              </div>
              <div class="form-check">
                <input type="checkbox" class="form-check-input is-invalid">
                <label for="" class="form-check-label">年收40-69萬</label>
              </div>
              <div class="form-check">
                <input type="checkbox" class="form-check-input is-invalid">
                <label for="" class="form-check-label">年收70-99萬</label>
              </div>
              <div class="form-check">
                <input type="checkbox" class="form-check-input is-invalid">
                <label for="" class="form-check-label">年收100-199萬</label>
              </div>

              <div class="form-check ">
                <input type="checkbox" class="form-check-input is-invalid">
                <label for="" class="form-check-label">年收200萬以上</label>
              </div>
              <div class="valid-feedback">符合規則</div>
              <div class="invalid-feedback">不符合規則</div>
            </div>

            <div class="mb-3">
              <div class="form-check form-switch mt-auto">
                <input type="checkbox" class="form-check-input is-invalid" role="switch" id="chk01" name="chk01">
                <label for="chk01" class="form-check-label">不同意</label>

                <!-- 加上.讓畫面對齊 -->
                <div class="valid-feedback">.</div>
                <div class="invalid-feedback">須同意始能註冊!</div>
              </div>
            </div>

            <div class="modal-footer justify-content-center">
              <button type="button" class="btn btn-secondary " data-bs-dismiss="modal">取消</button>
              <button type="button" class="btn btn-success" id="ok_btn_reg">送出</button>
            </div>

          </div>
        </div>
      </div>

    </div>
  </div>


  <script src="js/bootstrap.bundle.min.js"></script>
  <!-- https://github.com/donma/TaiwanAddressCityAreaRoadChineseEnglishJSON -->
  <!-- 下載zip黨 -->
  <script src="https://unpkg.com/counterup2@2.0.2/dist/index.js">	</script>
  <script src="js/jquery-3.7.1.min.js"></script>
  <script src="js/wow.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="js/leaflet.markercluster.js"></script>
  <script src="js/leaflet-color-markers.js"></script>
  <script>
    new WOW().init();
  </script>
  <script>
    var allCityData; //所有縣市資料
    var youbikeData; //台中youbike資料

    var myarea; //紀錄選取的鄉鎮
    var map;
    var markers;

    $(function () {
      // 藝文活動資料
      $.ajax({
        type: "GET",
        url: "https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=1",
        dataType: "json",
        success: function (data) {
          console.log(data);
          youbikeData = data.showInfo;
          console.log(youbikeData);

        },
        error: function () {
          Swal.fire({
            title: "API介接錯誤?",
            text: "https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=1",
            icon: "error"
          });
        }
      });


      // 縣市資料
      $.ajax({
        type: "GET",
        url: "js/CityCountyData.json",
        dataType: "json",
        // 請求同步async: false,
        // async: false,
        success: function (data) {
          // console.log(data);
          allCityData = data;
          console.log(allCityData);

          // 顯示縣市選單
          $("#selectCity").empty();
          $("#selectCity").append(' <option value="" class="text-center" selected disabled>---選擇居住地---</option>');
          data.forEach(function (item) {
            console.log(item.CityName);

            var strHTML = `<option value="${item.CityName}">${item.CityName}</option>`;
            $("#selectCity").append(strHTML);
          });
        },
        error: function () {
          Swal.fire({
            title: "API介接錯誤?",
            text: "js/CityCountyData.json",
            icon: "error"
          });
        }
      });

      //     //產生台中市鄉鎮區選單
      //     allCityData.forEach(function (item) {
      //         if (item.CityName == "臺中市") {
      //             $("#myarea").empty();
      //             $("#myarea").append('<option value="" selected disabled>---選擇鄉鎮區名稱---</option>');
      //             item.AreaList.forEach(function (itemarea) {
      //                 console.log(itemarea.AreaName);
      //                 //產生鄉鎮區選單
      //                 var strHTML = `<option value="${itemarea.AreaName}">${itemarea.AreaName}</option>`;
      //                 $("#myarea").append(strHTML);
      //             });
      //         }
      //     });

    });

    //ok_btn_reg按鈕監聽
    $("#ok_btn_reg").click(function () {
      //input: {"username" : "owner04", "password" : "123456", "email" : "owner01@test.com"}
      var JSONdata = {};
      JSONdata["username"] = $("#username_reg").val();
      JSONdata["password"] = $("#password_reg").val();
      JSONdata["email"] = $("#email_reg").val();
      console.log(JSON.stringify(JSONdata));

      const url = "https://gingin_php.aimidy.co/art/artEvents-member_control_api_v2.php?action=register"

      $.ajax({
        type: "POST",
        url: url,
        data: JSON.stringify(JSONdata),
        dataType: "json",
        success: showdata_reg,//最下方另一個function呈現
        error: function () {

          // sweetalert
          Swal.fire({
            title: "API介接錯誤",
            text: url,
            icon: "error"
          });
        }
      });
    });

    function showdata_reg(data) {
      console.log(data);
      if (data.state) {
        Swal.fire({
          title: data.message,
          icon: "success"
        }).then((result) => {
          if (result.isConfirmed) {
            location.reload();
          }
        });;
      } else {
        Swal.fire({
          title: data.message,
          icon: "error"
        });
      }
    }

  </script>
</body>

</html>